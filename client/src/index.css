@tailwind base;
@tailwind components;
@tailwind utilities;

/* LIGHT MODE */
:root {
  --button-outline: rgba(0,0,0, .10);
  --badge-outline: rgba(0,0,0, .05);

  /* Automatic computation of border around primary / danger buttons */
  --opaque-button-border-intensity: -8; /* In terms of percentages */

  /* Backgrounds applied on top of other backgrounds when hovered/active */
  --elevate-1: rgba(0,0,0, .03);
  --elevate-2: rgba(0,0,0, .08);

  --background: 0 0% 99%;

  --foreground: 199 37% 24%;

  --border: 0 0% 88%;

  --card: 0 0% 97%;

  --card-foreground: 199 37% 24%;

  --card-border: 0 0% 92%;

  --sidebar: 0 0% 95%;

  --sidebar-foreground: 199 37% 24%;

  --sidebar-border: 0 0% 89%;

  --sidebar-primary: 143 76% 38%;

  --sidebar-primary-foreground: 0 0% 100%;

  --sidebar-accent: 43 75% 66%;

  --sidebar-accent-foreground: 199 37% 24%;

  --sidebar-ring: 143 76% 38%;

  --popover: 0 0% 93%;

  --popover-foreground: 199 37% 24%;

  --popover-border: 0 0% 87%;

  --primary: 143 76% 38%;

  --primary-foreground: 0 0% 100%;

  --secondary: 0 0% 91%;

  --secondary-foreground: 199 37% 24%;

  --muted: 43 15% 90%;

  --muted-foreground: 199 37% 35%;

  --accent: 43 20% 88%;

  --accent-foreground: 199 37% 24%;

  --destructive: 0 72% 51%;

  --destructive-foreground: 0 0% 100%;

  --input: 0 0% 78%;
  --ring: 143 76% 38%;
  --chart-1: 143 76% 38%;
  --chart-2: 27 87% 67%;
  --chart-3: 199 37% 24%;
  --chart-4: 43 75% 66%;
  --chart-5: 143 76% 50%;

  --font-sans: Poppins, sans-serif;
  --font-serif: Georgia, serif;
  --font-mono: Menlo, monospace;
  --font-display: Rubik, sans-serif;
  --radius: .5rem; /* 8px */
  --shadow-2xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);
  --shadow-xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);
  --shadow-sm: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.00);
  --shadow: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.00);
  --shadow-md: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 2px 4px -1px hsl(0 0% 0% / 0.00);
  --shadow-lg: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 4px 6px -1px hsl(0 0% 0% / 0.00);
  --shadow-xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 8px 10px -1px hsl(0 0% 0% / 0.00);
  --shadow-2xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);
  --tracking-normal: 0em;
  --spacing: 0.25rem;

  /* Automatically computed borders - intensity can be controlled by the user by the --opaque-button-border-intensity setting */

  /* Fallback for older browsers */
  --sidebar-primary-border: hsl(var(--sidebar-primary));
  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Fallback for older browsers */
  --sidebar-accent-border: hsl(var(--sidebar-accent));
  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Fallback for older browsers */
  --primary-border: hsl(var(--primary));
  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Fallback for older browsers */
  --secondary-border: hsl(var(--secondary));
  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Fallback for older browsers */
  --muted-border: hsl(var(--muted));
  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Fallback for older browsers */
  --accent-border: hsl(var(--accent));
  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Fallback for older browsers */
  --destructive-border: hsl(var(--destructive));
  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);
}

.dark {
  --button-outline: rgba(255,255,255, .10);
  --badge-outline: rgba(255,255,255, .05);

  --opaque-button-border-intensity: 9;  /* In terms of percentages */

  /* Backgrounds applied on top of other backgrounds when hovered/active */
  --elevate-1: rgba(255,255,255, .04);
  --elevate-2: rgba(255,255,255, .09);

  --background: 199 5% 12%;

  --foreground: 0 0% 95%;

  --border: 199 5% 20%;

  --card: 199 5% 14%;

  --card-foreground: 0 0% 95%;

  --card-border: 199 5% 18%;

  --sidebar: 199 5% 16%;

  --sidebar-foreground: 0 0% 95%;

  --sidebar-border: 199 5% 21%;

  --sidebar-primary: 143 76% 35%;

  --sidebar-primary-foreground: 0 0% 100%;

  --sidebar-accent: 43 75% 58%;

  --sidebar-accent-foreground: 199 37% 12%;

  --sidebar-ring: 143 76% 38%;

  --popover: 199 5% 18%;

  --popover-foreground: 0 0% 95%;

  --popover-border: 199 5% 23%;

  --primary: 143 76% 35%;

  --primary-foreground: 0 0% 100%;

  --secondary: 199 5% 22%;

  --secondary-foreground: 0 0% 95%;

  --muted: 143 8% 20%;

  --muted-foreground: 0 0% 75%;

  --accent: 43 12% 22%;

  --accent-foreground: 0 0% 95%;

  --destructive: 0 72% 45%;

  --destructive-foreground: 0 0% 100%;

  --input: 199 5% 28%;
  --ring: 143 76% 38%;
  --chart-1: 143 76% 55%;
  --chart-2: 27 87% 72%;
  --chart-3: 199 37% 65%;
  --chart-4: 43 75% 70%;
  --chart-5: 143 76% 60%;

  --shadow-2xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);
  --shadow-xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);
  --shadow-sm: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.00);
  --shadow: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 1px 2px -1px hsl(0 0% 0% / 0.00);
  --shadow-md: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 2px 4px -1px hsl(0 0% 0% / 0.00);
  --shadow-lg: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 4px 6px -1px hsl(0 0% 0% / 0.00);
  --shadow-xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00), 0px 8px 10px -1px hsl(0 0% 0% / 0.00);
  --shadow-2xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.00);

  /* Fallback for older browsers */
  --sidebar-primary-border: hsl(var(--sidebar-primary));
  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Fallback for older browsers */
  --sidebar-accent-border: hsl(var(--sidebar-accent));
  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Fallback for older browsers */
  --primary-border: hsl(var(--primary));
  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Fallback for older browsers */
  --secondary-border: hsl(var(--secondary));
  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Fallback for older browsers */
  --muted-border: hsl(var(--muted));
  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Fallback for older browsers */
  --accent-border: hsl(var(--accent));
  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);

  /* Fallback for older browsers */
  --destructive-border: hsl(var(--destructive));
  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply font-sans antialiased bg-background text-foreground;
  }

  h1, h2, h3, h4, h5, h6 {
    @apply font-display;
  }
}

/**
 * Using the elevate system.
 * Automatic contrast adjustment.
 *
 * <element className="hover-elevate" />
 * <element className="active-elevate-2" />
 *
 * // Using the tailwind utility when a data attribute is "on"
 * <element className="toggle-elevate data-[state=on]:toggle-elevated" />
 * // Or manually controlling the toggle state
 * <element className="toggle-elevate toggle-elevated" />
 *
 * Elevation systems have to handle many states.
 * - not-hovered, vs. hovered vs. active  (three mutually exclusive states)
 * - toggled or not
 * - focused or not (this is not handled with these utilities)
 *
 * Even without handling focused or not, this is six possible combinations that
 * need to be distinguished from eachother visually.
 */
@layer utilities {

  /* Hide ugly search cancel button in Chrome until we can style it properly */
  input[type="search"]::-webkit-search-cancel-button {
    @apply hidden;
  }

  /* Placeholder styling for contentEditable div */
  [contenteditable][data-placeholder]:empty::before {
    content: attr(data-placeholder);
    color: hsl(var(--muted-foreground));
    pointer-events: none;
  }

  /* .no-default-hover-elevate/no-default-active-elevate is an escape hatch so consumers of
   * buttons/badges can remove the automatic brightness adjustment on interactions
   * and program their own. */
  .no-default-hover-elevate {}

  .no-default-active-elevate {}


  /**
   * Toggleable backgrounds go behind the content. Hoverable/active goes on top.
   * This way they can stack/compound. Both will overlap the parent's borders!
   * So borders will be automatically adjusted both on toggle, and hover/active,
   * and they will be compounded.
   */
  .toggle-elevate::before,
  .toggle-elevate-2::before {
    content: "";
    pointer-events: none;
    position: absolute;
    inset: 0px;
    /*border-radius: inherit;   match rounded corners */
    border-radius: inherit;
    z-index: -1;
    /* sits behind content but above backdrop */
  }

  .toggle-elevate.toggle-elevated::before {
    background-color: var(--elevate-2);
  }

  /* If there's a 1px border, adjust the inset so that it covers that parent's border */
  .border.toggle-elevate::before {
    inset: -1px;
  }

  /* Does not work on elements with overflow:hidden! */
  .hover-elevate:not(.no-default-hover-elevate),
  .active-elevate:not(.no-default-active-elevate),
  .hover-elevate-2:not(.no-default-hover-elevate),
  .active-elevate-2:not(.no-default-active-elevate) {
    position: relative;
    z-index: 0;
  }

  .hover-elevate:not(.no-default-hover-elevate)::after,
  .active-elevate:not(.no-default-active-elevate)::after,
  .hover-elevate-2:not(.no-default-hover-elevate)::after,
  .active-elevate-2:not(.no-default-active-elevate)::after {
    content: "";
    pointer-events: none;
    position: absolute;
    inset: 0px;
    /*border-radius: inherit;   match rounded corners */
    border-radius: inherit;
    z-index: 999;
    /* sits in front of content */
  }

  .hover-elevate:hover:not(.no-default-hover-elevate)::after,
  .active-elevate:active:not(.no-default-active-elevate)::after {
    background-color: var(--elevate-1);
  }

  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,
  .active-elevate-2:active:not(.no-default-active-elevate)::after {
    background-color: var(--elevate-2);
  }

  /* If there's a 1px border, adjust the inset so that it covers that parent's border */
  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,
  .border.active-elevate:not(.no-active-interaction-elevate)::after,
  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,
  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,
  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {
    inset: -1px;
  }

  /* Animated background pattern with paw prints and bones */
  body::before {
    content: "";
    position: fixed;
    inset: 0;
    z-index: -1;
    background-image: 
      url("data:image/svg+xml,%3Csvg width='200' height='200' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%2318ac61' fill-opacity='0.08'%3E%3Cpath d='M50,30 Q48,25 45,24 Q42,23 40,25 Q38,27 38,30 Q38,33 40,35 Q42,37 45,36 Q48,35 50,30z M35,45 Q33,40 30,39 Q27,38 25,40 Q23,42 23,45 Q23,48 25,50 Q27,52 30,51 Q33,50 35,45z M65,45 Q63,40 60,39 Q57,38 55,40 Q53,42 53,45 Q53,48 55,50 Q57,52 60,51 Q63,50 65,45z M40,60 Q35,58 30,60 Q25,62 22,67 Q20,72 22,77 Q24,82 29,84 Q34,86 39,84 Q44,82 46,77 Q48,72 46,67 Q44,62 40,60z'/%3E%3C/g%3E%3C/svg%3E"),
      url("data:image/svg+xml,%3Csvg width='180' height='180' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23e9c46a' fill-opacity='0.06'%3E%3Cpath d='M40,60 L50,55 Q55,53 60,55 L70,60 Q72,62 72,65 L72,75 Q72,78 70,80 L60,85 Q55,87 50,85 L40,80 Q38,78 38,75 L38,65 Q38,62 40,60z M45,68 Q43,68 43,70 L43,72 Q43,74 45,74 L65,74 Q67,74 67,72 L67,70 Q67,68 65,68z'/%3E%3C/g%3E%3C/svg%3E"),
      url("data:image/svg+xml,%3Csvg width='220' height='220' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23f4a261' fill-opacity='0.07'%3E%3Cpath d='M70,40 Q68,35 65,34 Q62,33 60,35 Q58,37 58,40 Q58,43 60,45 Q62,47 65,46 Q68,45 70,40z M55,55 Q53,50 50,49 Q47,48 45,50 Q43,52 43,55 Q43,58 45,60 Q47,62 50,61 Q53,60 55,55z M85,55 Q83,50 80,49 Q77,48 75,50 Q73,52 73,55 Q73,58 75,60 Q77,62 80,61 Q83,60 85,55z M60,70 Q55,68 50,70 Q45,72 42,77 Q40,82 42,87 Q44,92 49,94 Q54,96 59,94 Q64,92 66,87 Q68,82 66,77 Q64,72 60,70z'/%3E%3C/g%3E%3C/svg%3E"),
      url("data:image/svg+xml,%3Csvg width='160' height='160' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23264653' fill-opacity='0.05'%3E%3Cpath d='M30,50 L40,45 Q45,43 50,45 L60,50 Q62,52 62,55 L62,65 Q62,68 60,70 L50,75 Q45,77 40,75 L30,70 Q28,68 28,65 L28,55 Q28,52 30,50z M35,58 Q33,58 33,60 L33,62 Q33,64 35,64 L55,64 Q57,64 57,62 L57,60 Q57,58 55,58z'/%3E%3C/g%3E%3C/svg%3E");
    background-size: 200px 200px, 180px 180px, 220px 220px, 160px 160px;
    background-position: 0 0, 100px 100px, 50px 150px, 150px 50px;
    animation: movePawsAndBones 60s linear infinite;
    pointer-events: none;
  }

  @keyframes movePawsAndBones {
    0% { 
      background-position: 0 0, 100px 100px, 50px 150px, 150px 50px;
    }
    100% { 
      background-position: 200px 200px, 300px 300px, 250px 350px, 350px 250px;
    }
  }
}